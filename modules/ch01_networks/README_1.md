## üß© 1.1 A Directed Graph in which Nodes are Python functions


## üéØ Goal


- Build a distributed application by creating a **network** which is **directed graph** in which nodes are **agents** that process messages and edges are channels along which messages flow. Agents execute concurrently. 
- Introduction to **sources**, **transformers**, and **sinks**.
---

## üíª Example
 
```python
      +----------------+
      |   from_list    |
      +----------------+
               |
               v
      +----------------+
      |   uppercase    |
      +----------------+
               |
               v
      +----------------+
      |  to_results    |
      +----------------+

# modules.ch01_networks.basic_network.py

from dsl import network

def from_list():
    for item in ["hello", "world"]:
        yield item

def uppercase(v):
    return v.upper()

results = []

def to_results(x):
    results.append(x)


g = network([(from_list, uppercase), (uppercase, to_results)])

g.run_network()
print(results)  # Output: ['HELLO', 'WORLD']

```

You can run the example from the DisSysLab directory by executing:

```
python -m modules.ch01_networks.basic_network

```
## üìç Network
A network is specified by the list of edges of a directed graph. An edge is an ordered pair **(u, v)** which is an edge from node **u** to node **v**. Every node in the network has at least one incident edge. 

This example has two edges: ```(from_list, uppercase)``` and ```(uppercase, to_results)``` and  3 nodes: ```from_list```, ```uppercase```, and ```to_results```. The name of a node is the name of the function (a "callable" in Python) that is executed by the node. 

The node ```from_list``` is a **source**. A source function has no parameters. A source function is an iterator which generates a sequence of values. Each execution of **yield** generates another value. In this example the iterator ```from_list``` yields two values: "hello" and "world". In many applications the number of values generated by a source is unbounded. For example, a source such as a temperature sensor generates measurements forever.

The node ```uppercase``` is a **transformer**. A transformer function has a single parameter and returns a single value.  In this example, the function ```uppercase``` has a single parameter ```v``` and returns a single value ```v.upper()```.

The node ```to_results``` is a **sink**. A sink function has a single parameter. The function ```to_results``` has a single parameter ```x``` and execution of the function appends ```x``` to the list ```results```.

A source has no input edges and has at least one output edge. A transformer node has at least one input edge and a least one output edge. A sink node has no output edges and at least one input edge. Messages sent along an edge are received in the order in which they are sent.

In this example, messages generated by from_list are sent to uppercase, and messages sent by uppercase are sent to to_results. Because messages are received in the order sent, ```results``` is ['HELLO', 'WORLD'] and not ['WORLD', 'HELLO'].

---
## üß† Key Concepts
- A network is a directed graph in which nodes are agents that process messages which flow along edges.
  
- A **source** is specified by a function which is any iterator. A source has no inputs.
  
- A **transformer** is specified by a function which has a single input and a single output.
  
- A **sink** is specified by a function which has a single input and no outputs.
  
- Messages sent along an edge are received in the order sent.


## üß† THE CENTRAL TAKEAWAY

**The functions that define the nodes of the network are ordinary functions.** They do not use threads, processes, queues or message send/receive operations.

You develop a distributed application in DisSysLab by connecting functions.
You often find the functions that you need in libraries such as Scikit or from AI-assisted software tools. In many cases you will use LLM (Large Language Model) functions by using prompts from a prompt library or writing your own.

## üëâ Next
[Develop networks](./README_2.md) with fanout (the output of node is connected to the inputs of two or more nodes) and fanin (the input of a node is connected to the outputs of more than one node).
