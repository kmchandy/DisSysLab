{
  "sources.random_walk_1d": {
    "role": "source",
    "title": "One-dimensional random walk (drift + Gaussian noise + occasional jumps)",
    "description": "Generates a stream of dict messages representing a 1D random walk.\n\nEach message has:\n  • t_step: int step index\n  • x: float position\n\nModel:\n  x[t+1] = x[t] + drift_per_step + Normal(0, sigma)\n  plus an occasional jump Normal(0, jump_stdev) with probability prob_jump.",
    "params": {
      "n_steps": 500,
      "base": 100.0,
      "drift_per_step": 0.1,
      "sigma": 1.0,
      "seed": 0,
      "prob_jump": 0.1,
      "jump_stdev": 10.0,
      "sleep_time_per_step": 0.0,
      "name": "src_random_walk"
    },
    "outputs": { "t_step": "int", "x": "float" },
    "examples": [
      {
        "params": {
          "n_steps": 600,
          "base": 100.0,
          "drift_per_step": 0.01,
          "sigma": 0.6,
          "seed": 42,
          "prob_jump": 0.1,
          "jump_stdev": 10.0,
          "sleep_time_per_step": 0.0,
          "name": "src"
        }
      }
    ],
    "tags": ["demo", "math", "stream", "anomaly-detection", "random-walk"],
    "suggested_next": ["transforms.anomaly_exponential_sliding_window", "sinks.console_summary", "sinks.jsonl_recorder"]
  },

  "transforms.anomaly_exponential_sliding_window": {
    "role": "transform",
    "title": "Exponential moving average + std anomaly detector (streaming)",
    "description": "Receives a message dict containing a numeric field (by default, \"x\"). Computes an exponential moving average (ema) and an exponentially-weighted standard deviation (std). Optionally computes prediction bands and an anomaly flag.\n\nField mapping:\n  • input_names maps program input names to message field names.\n  • output_names maps program output names to message field names (and acts as an allow-list).\n\nIf an output name is not present in output_names, that field is not added to the message. If output_names is omitted, the runner can synthesize the default mapping from the keys of outputs.",
    "params": {
      "alpha": 0.1,
      "k": 1.0,
      "input_names": { "x": "x" },
      "emit_bands": true,
      "name": "ema_std"
    },
    "inputs": { "x": "float" },
    "outputs": {
      "x": "float",
      "ema": "float",
      "std": "float",
      "pred_low": "float",
      "pred_high": "float",
      "anomaly": "bool"
    },
    "examples": [
      {
        "params": {
          "alpha": 0.1,
          "k": 1.0,
          "input_names": { "x": "x" },
          "output_names": {
            "x": "x",
            "ema": "ema",
            "std": "std",
            "pred_low": "pred_low",
            "pred_high": "pred_high",
            "anomaly": "anomaly"
          },
          "emit_bands": true,
          "name": "ema"
        }
      }
    ],
    "tags": ["demo", "math", "stream", "anomaly-detection", "ema", "std"],
    "suggested_next": ["sinks.console_summary", "sinks.jsonl_recorder"]
  },

  "sinks.jsonl_recorder": {
    "role": "sink",
    "title": "JSONL recorder (one JSON object per message)",
    "description": "Writes each input message (a dict / JSON object) as one line of JSONL (JSON Lines). One input message -> one JSON record per line.",
    "params": {
      "path": "anomaly_stream.jsonl",
      "mode": "w",
      "flush_every": 1,
      "ensure_ascii": false,
      "sort_keys": false,
      "name": "jsonl_recorder"
    },
    "inputs": { "msg": "json" },
    "outputs": {},
    "examples": [
      {
        "params": {
          "path": "anomaly_stream.jsonl",
          "mode": "w",
          "flush_every": 10,
          "name": "rec"
        }
      }
    ],
    "tags": ["sink", "file", "jsonl", "record"]
  },

  "sinks.console_recorder": {
    "role": "sink",
    "title": "Console recorder (print one line per message)",
    "description": "Prints each input message dict to the console as a single line of key=value pairs using standard formats for int, float, and str.",
    "params": {
      "float_sig": 6,
      "sort_keys": true,
      "max_str": 200,
      "prefix": "",
      "name": "console_recorder"
    },
    "inputs": { "msg": "json" },
    "outputs": {},
    "examples": [
      {
        "params": {
          "float_sig": 6,
          "sort_keys": true,
          "prefix": "",
          "name": "print_all"
        }
      }
    ],
    "tags": ["sink", "console", "display", "debug"]
  }
  
}
