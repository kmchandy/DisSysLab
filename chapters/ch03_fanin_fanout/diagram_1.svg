<svg viewBox="0 0 980 420" xmlns="http://www.w3.org/2000/svg" font-family="Inter, Arial, sans-serif">
  <defs>
    <style>
      .box{fill:#fff;stroke:#333;stroke-width:2;rx:12;ry:12}
      .label{font-size:16px;fill:#111}
      .sub{font-size:13px;fill:#555}
      .arrow{stroke:#333;stroke-width:2;fill:none;marker-end:url(#arrow)}
      .tag{font-size:12px;fill:#111}
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#333"/>
    </marker>
  </defs>

  <!-- Generator -->
  <rect class="box" x="60" y="40" width="180" height="80"/>
  <text class="label" x="90" y="70">Generator</text>
  <text class="sub"   x="90" y="95">{ "review": ... }</text>

  <!-- Split -->
  <rect class="box" x="300" y="40" width="180" height="80"/>
  <text class="label" x="345" y="70">Split</text>
  <text class="sub"   x="315" y="95">routes → "pos" | "neg"</text>

  <!-- pos_exclaim -->
  <rect class="box" x="560" y="10" width="200" height="100"/>
  <text class="label" x="585" y="45">pos_exclaim</text>
  <text class="sub"   x="585" y="70">text + "!!!" → "positive"</text>

  <!-- neg_upper -->
  <rect class="box" x="560" y="160" width="200" height="100"/>
  <text class="label" x="588" y="195">neg_upper</text>
  <text class="sub"   x="588" y="220">upper(text) → "negative"</text>

  <!-- Merge -->
  <rect class="box" x="800" y="85" width="140" height="90"/>
  <text class="label" x="842" y="120">Merge</text>
  <text class="sub"   x="812" y="145">fan-in (pos, neg)</text>

  <!-- Recorder -->
  <rect class="box" x="820" y="310" width="160" height="80"/>
  <text class="label" x="850" y="340">Recorder</text>
  <text class="sub"   x="835" y="365">results: dicts</text>

  <!-- Arrows -->
  <path class="arrow" d="M240 80 L300 80"/>
  <text class="tag" x="250" y="72">"review"</text>

  <!-- Split to pos_exclaim -->
  <path class="arrow" d="M480 80 C520 80, 520 40, 560 40"/>
  <text class="tag" x="505" y="60">pos</text>

  <!-- Split to neg_upper -->
  <path class="arrow" d="M480 80 C520 80, 520 210, 560 210"/>
  <text class="tag" x="505" y="185">neg</text>

  <!-- pos_exclaim to Merge -->
  <path class="arrow" d="M760 60 C785 60, 800 75, 800 90"/>
  <text class="tag" x="700" y="55">{"positive": ...}</text>

  <!-- neg_upper to Merge -->
  <path class="arrow" d="M760 210 C785 210, 800 195, 800 175"/>
  <text class="tag" x="700" y="230">{"negative": ...}</text>

  <!-- Merge to Recorder (down) -->
  <path class="arrow" d="M870 175 C870 220, 900 260, 900 310"/>

  <!-- Legend -->
  <g>
    <text class="label" x="60" y="270">Legend</text>
    <text class="sub"   x="60" y="295">• Generator emits {"review": text}</text>
    <text class="sub"   x="60" y="315">• Split selects "pos" or "neg"</text>
    <text class="sub"   x="60" y="335">• Positive branch → add "!!!" → write to "positive"</text>
    <text class="sub"   x="60" y="355">• Negative branch → UPPERCASE → write to "negative"</text>
  </g>
</svg>
